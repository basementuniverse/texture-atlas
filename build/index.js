(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it uses a non-standard name for the exports (exports).
(() => {
var exports = __webpack_exports__;
/*!******************!*\
  !*** ./index.ts ***!
  \******************/

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.textureAtlasContentProcessor = exports.textureAtlas = void 0;
const defaultOptions = {
    relative: true,
    width: 1,
    height: 1,
    regions: {
        default: {
            x: 0,
            y: 0,
        },
    },
};
/**
 * Takes an image and some texture atlas options and returns a dictionary
 * of canvases indexed by region name
 */
function textureAtlas(image, options) {
    const actualOptions = Object.assign({}, defaultOptions, options !== null && options !== void 0 ? options : {});
    if (actualOptions.width <= 0 || actualOptions.height <= 0) {
        throw new Error('Width and height must be greater than 0');
    }
    if (Object.keys(actualOptions.regions).length === 0) {
        throw new Error('No regions defined');
    }
    const cellWidth = actualOptions.relative
        ? Math.ceil(image.width / actualOptions.width)
        : actualOptions.width;
    const cellHeight = actualOptions.relative
        ? Math.ceil(image.height / actualOptions.height)
        : actualOptions.height;
    const map = {};
    for (const [name, region] of Object.entries(actualOptions.regions)) {
        const regionCanvas = document.createElement('canvas');
        const regionContext = regionCanvas.getContext('2d');
        if (!regionContext) {
            throw new Error('Failed to get 2D context');
        }
        const absoluteX = Math.floor(region.x * cellWidth);
        const absoluteY = Math.floor(region.y * cellHeight);
        const absoluteWidth = Math.ceil(region.width
            ? (actualOptions.relative
                ? region.width * cellWidth
                : region.width)
            : (actualOptions.relative
                ? cellWidth
                : image.width - absoluteX));
        const absoluteHeight = Math.ceil(region.height
            ? (actualOptions.relative
                ? region.height * cellHeight
                : region.height)
            : (actualOptions.relative
                ? cellHeight
                : image.height - absoluteY));
        regionCanvas.width = absoluteWidth;
        regionCanvas.height = absoluteHeight;
        regionContext.drawImage(image, absoluteX, absoluteY, absoluteWidth, absoluteHeight, 0, 0, absoluteWidth, absoluteHeight);
        map[name] = regionCanvas;
    }
    return map;
}
exports.textureAtlas = textureAtlas;
/**
 * Content Manager Processor wrapper which allows the textureAtlas function
 * to be used as a processor in a Content Manager
 *
 * @see https://www.npmjs.com/package/@basementuniverse/content-manager
 */
async function textureAtlasContentProcessor(content, data, imageName) {
    var _a;
    const image = (_a = content[imageName]) === null || _a === void 0 ? void 0 : _a.content;
    if (!image) {
        throw new Error(`Image '${imageName}' not found`);
    }
    const map = textureAtlas(image, data);
    for (const [name, canvas] of Object.entries(map)) {
        content[name] = {
            name,
            type: 'image',
            content: canvas,
            status: 4,
        };
    }
}
exports.textureAtlasContentProcessor = textureAtlasContentProcessor;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUEwRUEsTUFBTSxjQUFjLEdBQXdCO0lBQzFDLFFBQVEsRUFBRSxJQUFJO0lBQ2QsS0FBSyxFQUFFLENBQUM7SUFDUixNQUFNLEVBQUUsQ0FBQztJQUNULE9BQU8sRUFBRTtRQUNQLE9BQU8sRUFBRTtZQUNQLENBQUMsRUFBRSxDQUFDO1lBQ0osQ0FBQyxFQUFFLENBQUM7U0FDTDtLQUNGO0NBQ0YsQ0FBQztBQUVGOzs7R0FHRztBQUNILFNBQWdCLFlBQVksQ0FDMUIsS0FBdUIsRUFDdkIsT0FBc0M7SUFFdEMsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FDakMsRUFBRSxFQUNGLGNBQWMsRUFDZCxPQUFPLGFBQVAsT0FBTyxjQUFQLE9BQU8sR0FBSSxFQUFFLENBQ2QsQ0FBQztJQUVGLElBQUksYUFBYSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksYUFBYSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7UUFDekQsTUFBTSxJQUFJLEtBQUssQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO0tBQzVEO0lBRUQsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQ25ELE1BQU0sSUFBSSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztLQUN2QztJQUVELE1BQU0sU0FBUyxHQUFHLGFBQWEsQ0FBQyxRQUFRO1FBQ3RDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQztRQUM5QyxDQUFDLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQztJQUN4QixNQUFNLFVBQVUsR0FBRyxhQUFhLENBQUMsUUFBUTtRQUN2QyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENB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
})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE87Ozs7Ozs7OztBQ1ZhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG9DQUFvQyxHQUFHLG9CQUFvQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsdUVBQXVFO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxVQUFVO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEMsMkNBQTJDLDJuSCIsInNvdXJjZXMiOlsid2VicGFjazovL0BiYXNlbWVudHVuaXZlcnNlL3RleHR1cmUtYXRsYXMvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL0BiYXNlbWVudHVuaXZlcnNlL3RleHR1cmUtYXRsYXMvLi9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkoc2VsZiwgKCkgPT4ge1xucmV0dXJuICIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy50ZXh0dXJlQXRsYXNDb250ZW50UHJvY2Vzc29yID0gZXhwb3J0cy50ZXh0dXJlQXRsYXMgPSB2b2lkIDA7XG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICByZWxhdGl2ZTogdHJ1ZSxcbiAgICB3aWR0aDogMSxcbiAgICBoZWlnaHQ6IDEsXG4gICAgcmVnaW9uczoge1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgfSxcbiAgICB9LFxufTtcbi8qKlxuICogVGFrZXMgYW4gaW1hZ2UgYW5kIHNvbWUgdGV4dHVyZSBhdGxhcyBvcHRpb25zIGFuZCByZXR1cm5zIGEgZGljdGlvbmFyeVxuICogb2YgY2FudmFzZXMgaW5kZXhlZCBieSByZWdpb24gbmFtZVxuICovXG5mdW5jdGlvbiB0ZXh0dXJlQXRsYXMoaW1hZ2UsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBhY3R1YWxPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwID8gb3B0aW9ucyA6IHt9KTtcbiAgICBpZiAoYWN0dWFsT3B0aW9ucy53aWR0aCA8PSAwIHx8IGFjdHVhbE9wdGlvbnMuaGVpZ2h0IDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXaWR0aCBhbmQgaGVpZ2h0IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnKTtcbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKGFjdHVhbE9wdGlvbnMucmVnaW9ucykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVnaW9ucyBkZWZpbmVkJyk7XG4gICAgfVxuICAgIGNvbnN0IGNlbGxXaWR0aCA9IGFjdHVhbE9wdGlvbnMucmVsYXRpdmVcbiAgICAgICAgPyBNYXRoLmNlaWwoaW1hZ2Uud2lkdGggLyBhY3R1YWxPcHRpb25zLndpZHRoKVxuICAgICAgICA6IGFjdHVhbE9wdGlvbnMud2lkdGg7XG4gICAgY29uc3QgY2VsbEhlaWdodCA9IGFjdHVhbE9wdGlvbnMucmVsYXRpdmVcbiAgICAgICAgPyBNYXRoLmNlaWwoaW1hZ2UuaGVpZ2h0IC8gYWN0dWFsT3B0aW9ucy5oZWlnaHQpXG4gICAgICAgIDogYWN0dWFsT3B0aW9ucy5oZWlnaHQ7XG4gICAgY29uc3QgbWFwID0ge307XG4gICAgZm9yIChjb25zdCBbbmFtZSwgcmVnaW9uXSBvZiBPYmplY3QuZW50cmllcyhhY3R1YWxPcHRpb25zLnJlZ2lvbnMpKSB7XG4gICAgICAgIGNvbnN0IHJlZ2lvbkNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBjb25zdCByZWdpb25Db250ZXh0ID0gcmVnaW9uQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGlmICghcmVnaW9uQ29udGV4dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2V0IDJEIGNvbnRleHQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhYnNvbHV0ZVggPSBNYXRoLmZsb29yKHJlZ2lvbi54ICogY2VsbFdpZHRoKTtcbiAgICAgICAgY29uc3QgYWJzb2x1dGVZID0gTWF0aC5mbG9vcihyZWdpb24ueSAqIGNlbGxIZWlnaHQpO1xuICAgICAgICBjb25zdCBhYnNvbHV0ZVdpZHRoID0gTWF0aC5jZWlsKHJlZ2lvbi53aWR0aFxuICAgICAgICAgICAgPyAoYWN0dWFsT3B0aW9ucy5yZWxhdGl2ZVxuICAgICAgICAgICAgICAgID8gcmVnaW9uLndpZHRoICogY2VsbFdpZHRoXG4gICAgICAgICAgICAgICAgOiByZWdpb24ud2lkdGgpXG4gICAgICAgICAgICA6IChhY3R1YWxPcHRpb25zLnJlbGF0aXZlXG4gICAgICAgICAgICAgICAgPyBjZWxsV2lkdGhcbiAgICAgICAgICAgICAgICA6IGltYWdlLndpZHRoIC0gYWJzb2x1dGVYKSk7XG4gICAgICAgIGNvbnN0IGFic29sdXRlSGVpZ2h0ID0gTWF0aC5jZWlsKHJlZ2lvbi5oZWlnaHRcbiAgICAgICAgICAgID8gKGFjdHVhbE9wdGlvbnMucmVsYXRpdmVcbiAgICAgICAgICAgICAgICA/IHJlZ2lvbi5oZWlnaHQgKiBjZWxsSGVpZ2h0XG4gICAgICAgICAgICAgICAgOiByZWdpb24uaGVpZ2h0KVxuICAgICAgICAgICAgOiAoYWN0dWFsT3B0aW9ucy5yZWxhdGl2ZVxuICAgICAgICAgICAgICAgID8gY2VsbEhlaWdodFxuICAgICAgICAgICAgICAgIDogaW1hZ2UuaGVpZ2h0IC0gYWJzb2x1dGVZKSk7XG4gICAgICAgIHJlZ2lvbkNhbnZhcy53aWR0aCA9IGFic29sdXRlV2lkdGg7XG4gICAgICAgIHJlZ2lvbkNhbnZhcy5oZWlnaHQgPSBhYnNvbHV0ZUhlaWdodDtcbiAgICAgICAgcmVnaW9uQ29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIGFic29sdXRlWCwgYWJzb2x1dGVZLCBhYnNvbHV0ZVdpZHRoLCBhYnNvbHV0ZUhlaWdodCwgMCwgMCwgYWJzb2x1dGVXaWR0aCwgYWJzb2x1dGVIZWlnaHQpO1xuICAgICAgICBtYXBbbmFtZV0gPSByZWdpb25DYW52YXM7XG4gICAgfVxuICAgIHJldHVybiBtYXA7XG59XG5leHBvcnRzLnRleHR1cmVBdGxhcyA9IHRleHR1cmVBdGxhcztcbi8qKlxuICogQ29udGVudCBNYW5hZ2VyIFByb2Nlc3NvciB3cmFwcGVyIHdoaWNoIGFsbG93cyB0aGUgdGV4dHVyZUF0bGFzIGZ1bmN0aW9uXG4gKiB0byBiZSB1c2VkIGFzIGEgcHJvY2Vzc29yIGluIGEgQ29udGVudCBNYW5hZ2VyXG4gKlxuICogQHNlZSBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9AYmFzZW1lbnR1bml2ZXJzZS9jb250ZW50LW1hbmFnZXJcbiAqL1xuYXN5bmMgZnVuY3Rpb24gdGV4dHVyZUF0bGFzQ29udGVudFByb2Nlc3Nvcihjb250ZW50LCBkYXRhLCBpbWFnZU5hbWUpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgaW1hZ2UgPSAoX2EgPSBjb250ZW50W2ltYWdlTmFtZV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb250ZW50O1xuICAgIGlmICghaW1hZ2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbWFnZSAnJHtpbWFnZU5hbWV9JyBub3QgZm91bmRgKTtcbiAgICB9XG4gICAgY29uc3QgbWFwID0gdGV4dHVyZUF0bGFzKGltYWdlLCBkYXRhKTtcbiAgICBmb3IgKGNvbnN0IFtuYW1lLCBjYW52YXNdIG9mIE9iamVjdC5lbnRyaWVzKG1hcCkpIHtcbiAgICAgICAgY29udGVudFtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgY29udGVudDogY2FudmFzLFxuICAgICAgICAgICAgc3RhdHVzOiA0LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydHMudGV4dHVyZUF0bGFzQ29udGVudFByb2Nlc3NvciA9IHRleHR1cmVBdGxhc0NvbnRlbnRQcm9jZXNzb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lhVzVrWlhndWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl1TGk5cGJtUmxlQzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pT3pzN1FVRXdSVUVzVFVGQlRTeGpRVUZqTEVkQlFYZENPMGxCUXpGRExGRkJRVkVzUlVGQlJTeEpRVUZKTzBsQlEyUXNTMEZCU3l4RlFVRkZMRU5CUVVNN1NVRkRVaXhOUVVGTkxFVkJRVVVzUTBGQlF6dEpRVU5VTEU5QlFVOHNSVUZCUlR0UlFVTlFMRTlCUVU4c1JVRkJSVHRaUVVOUUxFTkJRVU1zUlVGQlJTeERRVUZETzFsQlEwb3NRMEZCUXl4RlFVRkZMRU5CUVVNN1UwRkRURHRMUVVOR08wTkJRMFlzUTBGQlF6dEJRVVZHT3pzN1IwRkhSenRCUVVOSUxGTkJRV2RDTEZsQlFWa3NRMEZETVVJc1MwRkJkVUlzUlVGRGRrSXNUMEZCYzBNN1NVRkZkRU1zVFVGQlRTeGhRVUZoTEVkQlFVY3NUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkRha01zUlVGQlJTeEZRVU5HTEdOQlFXTXNSVUZEWkN4UFFVRlBMR0ZCUVZBc1QwRkJUeXhqUVVGUUxFOUJRVThzUjBGQlNTeEZRVUZGTEVOQlEyUXNRMEZCUXp0SlFVVkdMRWxCUVVrc1lVRkJZU3hEUVVGRExFdEJRVXNzU1VGQlNTeERRVUZETEVsQlFVa3NZVUZCWVN4RFFVRkRMRTFCUVUwc1NVRkJTU3hEUVVGRExFVkJRVVU3VVVGRGVrUXNUVUZCVFN4SlFVRkpMRXRCUVVzc1EwRkJReXg1UTBGQmVVTXNRMEZCUXl4RFFVRkRPMHRCUXpWRU8wbEJSVVFzU1VGQlNTeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMR0ZCUVdFc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eE5RVUZOTEV0QlFVc3NRMEZCUXl4RlFVRkZPMUZCUTI1RUxFMUJRVTBzU1VGQlNTeExRVUZMTEVOQlFVTXNiMEpCUVc5Q0xFTkJRVU1zUTBGQlF6dExRVU4yUXp0SlFVVkVMRTFCUVUwc1UwRkJVeXhIUVVGSExHRkJRV0VzUTBGQlF5eFJRVUZSTzFGQlEzUkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4TFFVRkxMRWRCUVVjc1lVRkJZU3hEUVVGRExFdEJRVXNzUTBGQlF6dFJRVU01UXl4RFFVRkRMRU5CUVVNc1lVRkJZU3hEUVVGRExFdEJRVXNzUTBGQlF6dEpRVU40UWl4TlFVRk5MRlZCUVZVc1IwRkJSeXhoUVVGaExFTkJRVU1zVVVGQlVUdFJRVU4yUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNUVUZCVFN4SFFVRkhMR0ZCUVdFc1EwRkJReXhOUVVGTkxFTkJRVU03VVVGRGFFUXNRMEZCUXl4RFFVRkRMR0ZCUVdFc1EwRkJReXhOUVVGTkxFTkJRVU03U1VGRmVrSXNUVUZCVFN4SFFVRkhMRWRCUVc5Q0xFVkJRVVVzUTBGQlF6dEpRVVZvUXl4TFFVRkxMRTFCUVUwc1EwRkJReXhKUVVGSkxFVkJRVVVzVFVGQlRTeERRVUZETEVsQlFVa3NUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJReXhoUVVGaExFTkJRVU1zVDBGQlR5eERRVUZETEVWQlFVVTdVVUZEYkVVc1RVRkJUU3haUVVGWkxFZEJRVWNzVVVGQlVTeERRVUZETEdGQlFXRXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJRenRSUVVOMFJDeE5RVUZOTEdGQlFXRXNSMEZCUnl4WlFVRlpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzFGQlEzQkVMRWxCUVVrc1EwRkJReXhoUVVGaExFVkJRVVU3V1VGRGJFSXNUVUZCVFN4SlFVRkpMRXRCUVVzc1EwRkJReXd3UWtGQk1FSXNRMEZCUXl4RFFVRkRPMU5CUXpkRE8xRkJSVVFzVFVGQlRTeFRRVUZUTEVkQlFVY3NTVUZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eEhRVUZITEZOQlFWTXNRMEZCUXl4RFFVRkRPMUZCUTI1RUxFMUJRVTBzVTBGQlV5eEhRVUZITEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUjBGQlJ5eFZRVUZWTEVOQlFVTXNRMEZCUXp0UlFVTndSQ3hOUVVGTkxHRkJRV0VzUjBGQlJ5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVTTNRaXhOUVVGTkxFTkJRVU1zUzBGQlN6dFpRVU5XTEVOQlFVTXNRMEZCUXl4RFFVRkRMR0ZCUVdFc1EwRkJReXhSUVVGUk8yZENRVU55UWl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFdEJRVXNzUjBGQlJ5eFRRVUZUTzJkQ1FVTXhRaXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVc3NRMEZCUXp0WlFVTnVRaXhEUVVGRExFTkJRVU1zUTBGQlF5eGhRVUZoTEVOQlFVTXNVVUZCVVR0blFrRkRja0lzUTBGQlF5eERRVUZETEZOQlFWTTdaMEpCUTFnc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eExRVUZMTEVkQlFVY3NVMEZCVXl4RFFVRkRMRU5CUTJwRExFTkJRVU03VVVGRFJpeE5RVUZOTEdOQlFXTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVNNVFpeE5RVUZOTEVOQlFVTXNUVUZCVFR0WlFVTllMRU5CUVVNc1EwRkJReXhEUVVGRExHRkJRV0VzUTBGQlF5eFJRVUZSTzJkQ1FVTnlRaXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEUxQlFVMHNSMEZCUnl4VlFVRlZPMmRDUVVNMVFpeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJRenRaUVVOd1FpeERRVUZETEVOQlFVTXNRMEZCUXl4aFFVRmhMRU5CUVVNc1VVRkJVVHRuUWtGRGNrSXNRMEZCUXl4RFFVRkRMRlZCUVZVN1owSkJRMW9zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4TlFVRk5MRWRCUVVjc1UwRkJVeXhEUVVGRExFTkJRMnhETEVOQlFVTTdVVUZGUml4WlFVRlpMRU5CUVVNc1MwRkJTeXhIUVVGSExHRkJRV0VzUTBGQlF6dFJRVU51UXl4WlFVRlpMRU5CUVVNc1RVRkJUU3hIUVVGSExHTkJRV01zUTBGQlF6dFJRVVZ5UXl4aFFVRmhMRU5CUVVNc1UwRkJVeXhEUVVOeVFpeExRVUZMTEVWQlEwd3NVMEZCVXl4RlFVTlVMRk5CUVZNc1JVRkRWQ3hoUVVGaExFVkJRMklzWTBGQll5eEZRVU5rTEVOQlFVTXNSVUZEUkN4RFFVRkRMRVZCUTBRc1lVRkJZU3hGUVVOaUxHTkJRV01zUTBGRFppeERRVUZETzFGQlJVWXNSMEZCUnl4RFFVRkRMRWxCUVVrc1EwRkJReXhIUVVGSExGbEJRVmtzUTBGQlF6dExRVU14UWp0SlFVVkVMRTlCUVU4c1IwRkJSeXhEUVVGRE8wRkJRMklzUTBGQlF6dEJRVEZGUkN4dlEwRXdSVU03UVVGRlJEczdPenM3UjBGTFJ6dEJRVU5KTEV0QlFVc3NWVUZCVlN3MFFrRkJORUlzUTBGRGFFUXNUMEZMUlN4RlFVTkdMRWxCUVhsQ0xFVkJRM3BDTEZOQlFXbENPenRKUVVWcVFpeE5RVUZOTEV0QlFVc3NSMEZCUnl4TlFVRkJMRTlCUVU4c1EwRkJReXhUUVVGVExFTkJRVU1zTUVOQlFVVXNUMEZCVHl4RFFVRkRPMGxCUXpGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVWQlFVVTdVVUZEVml4TlFVRk5MRWxCUVVrc1MwRkJTeXhEUVVGRExGVkJRVlVzVTBGQlV5eGhRVUZoTEVOQlFVTXNRMEZCUXp0TFFVTnVSRHRKUVVWRUxFMUJRVTBzUjBGQlJ5eEhRVUZITEZsQlFWa3NRMEZCUXl4TFFVRjVRaXhGUVVGRkxFbEJRVWtzUTBGQlF5eERRVUZETzBsQlJURkVMRXRCUVVzc1RVRkJUU3hEUVVGRExFbEJRVWtzUlVGQlJTeE5RVUZOTEVOQlFVTXNTVUZCU1N4TlFVRk5MRU5CUVVNc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eEZRVUZGTzFGQlEyaEVMRTlCUVU4c1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ6dFpRVU5rTEVsQlFVazdXVUZEU2l4SlFVRkpMRVZCUVVVc1QwRkJUenRaUVVOaUxFOUJRVThzUlVGQlJTeE5RVUZOTzFsQlEyWXNUVUZCVFN4RlFVRkZMRU5CUVVNN1UwRkRWaXhEUVVGRE8wdEJRMGc3UVVGRFNDeERRVUZETzBGQmVrSkVMRzlGUVhsQ1F5SjkiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=