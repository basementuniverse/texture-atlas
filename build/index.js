(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it uses a non-standard name for the exports (exports).
(() => {
var exports = __webpack_exports__;
/*!******************!*\
  !*** ./index.ts ***!
  \******************/

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.textureAtlasContentProcessor = exports.textureAtlas = void 0;
const DEFAULT_REPEATING_REGION_NAME_FORMAT = '{name}-{n}';
const DEFAULT_OPTIONS = {
    relative: true,
    width: 1,
    height: 1,
    regions: {
        default: {
            x: 0,
            y: 0,
        },
    },
};
/**
 * Takes an image and some texture atlas options and returns a dictionary
 * of canvases indexed by region name
 */
function textureAtlas(image, options) {
    var _a, _b, _c, _d;
    const actualOptions = Object.assign({}, DEFAULT_OPTIONS, options !== null && options !== void 0 ? options : {});
    if (actualOptions.width <= 0 || actualOptions.height <= 0) {
        throw new Error('Width and height must be greater than 0');
    }
    if (Object.keys(actualOptions.regions).length === 0) {
        throw new Error('No regions defined');
    }
    const cellWidth = actualOptions.relative
        ? Math.ceil(image.width / actualOptions.width)
        : actualOptions.width;
    const cellHeight = actualOptions.relative
        ? Math.ceil(image.height / actualOptions.height)
        : actualOptions.height;
    const map = {};
    for (const [name, region] of Object.entries(actualOptions.regions)) {
        const absoluteX = Math.floor(region.x * cellWidth);
        const absoluteY = Math.floor(region.y * cellHeight);
        const absoluteWidth = Math.ceil(region.width
            ? (actualOptions.relative
                ? region.width * cellWidth
                : region.width)
            : (actualOptions.relative
                ? cellWidth
                : image.width - absoluteX));
        const absoluteHeight = Math.ceil(region.height
            ? (actualOptions.relative
                ? region.height * cellHeight
                : region.height)
            : (actualOptions.relative
                ? cellHeight
                : image.height - absoluteY));
        if (region.repeat && region.repeat > 0) {
            for (let i = 0; i < region.repeat; i++) {
                const repeatName = getRepeatingRegionName(name, i + 1, region.repeatNameFormat);
                let repeatOffsetX = Math.floor((((_a = region.repeatOffset) === null || _a === void 0 ? void 0 : _a.x) !== undefined &&
                    ((_b = region.repeatOffset) === null || _b === void 0 ? void 0 : _b.x) !== null)
                    ? (actualOptions.relative
                        ? region.repeatOffset.x * cellWidth
                        : region.repeatOffset.x)
                    : cellWidth);
                let repeatOffsetY = Math.floor((((_c = region.repeatOffset) === null || _c === void 0 ? void 0 : _c.y) !== undefined &&
                    ((_d = region.repeatOffset) === null || _d === void 0 ? void 0 : _d.y) !== null)
                    ? (actualOptions.relative
                        ? region.repeatOffset.y * cellHeight
                        : region.repeatOffset.y)
                    : 0);
                map[repeatName] = chopRegion(image, absoluteX + repeatOffsetX * i, absoluteY + repeatOffsetY * i, absoluteWidth, absoluteHeight);
            }
        }
        else {
            map[name] = chopRegion(image, absoluteX, absoluteY, absoluteWidth, absoluteHeight);
        }
    }
    return map;
}
exports.textureAtlas = textureAtlas;
/**
 * Chop a rectangular region from an image into a new canvas
 */
function chopRegion(image, x, y, width, height) {
    const canvas = document.createElement('canvas');
    const context = canvas.getContext('2d');
    canvas.width = width;
    canvas.height = height;
    if (!context) {
        throw new Error('Failed to get 2D context');
    }
    context.drawImage(image, x, y, width, height, 0, 0, width, height);
    return canvas;
}
/**
 * Get the name of a repeating region
 */
function getRepeatingRegionName(regionName, repetitionIndex, regionNameFormat) {
    return (regionNameFormat !== null && regionNameFormat !== void 0 ? regionNameFormat : DEFAULT_REPEATING_REGION_NAME_FORMAT)
        .replace('{name}', regionName)
        .replace('{n}', repetitionIndex.toString());
}
/**
 * Content Manager Processor wrapper which allows the textureAtlas function
 * to be used as a processor in a Content Manager
 *
 * @see https://www.npmjs.com/package/@basementuniverse/content-manager
 */
async function textureAtlasContentProcessor(content, data, imageName) {
    var _a;
    const image = (_a = content[imageName]) === null || _a === void 0 ? void 0 : _a.content;
    if (!image) {
        throw new Error(`Image '${imageName}' not found`);
    }
    const map = textureAtlas(image, data.content);
    for (const [name, canvas] of Object.entries(map)) {
        content[name] = {
            name,
            type: 'image',
            content: canvas,
            status: 4,
        };
    }
}
exports.textureAtlasContentProcessor = textureAtlasContentProcessor;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUE4R0EsTUFBTSxvQ0FBb0MsR0FBRyxZQUFZLENBQUM7QUFDMUQsTUFBTSxlQUFlLEdBQXdCO0lBQzNDLFFBQVEsRUFBRSxJQUFJO0lBQ2QsS0FBSyxFQUFFLENBQUM7SUFDUixNQUFNLEVBQUUsQ0FBQztJQUNULE9BQU8sRUFBRTtRQUNQLE9BQU8sRUFBRTtZQUNQLENBQUMsRUFBRSxDQUFDO1lBQ0osQ0FBQyxFQUFFLENBQUM7U0FDTDtLQUNGO0NBQ0YsQ0FBQztBQUVGOzs7R0FHRztBQUNILFNBQWdCLFlBQVksQ0FDMUIsS0FBMkMsRUFDM0MsT0FBc0M7O0lBRXRDLE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQ2pDLEVBQUUsRUFDRixlQUFlLEVBQ2YsT0FBTyxhQUFQLE9BQU8sY0FBUCxPQUFPLEdBQUksRUFBRSxDQUNkLENBQUM7SUFFRixJQUFJLGFBQWEsQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLGFBQWEsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO1FBQ3pELE1BQU0sSUFBSSxLQUFLLENBQUMseUNBQXlDLENBQUMsQ0FBQztLQUM1RDtJQUVELElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUNuRCxNQUFNLElBQUksS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7S0FDdkM7SUFFRCxNQUFNLFNBQVMsR0FBRyxhQUFhLENBQUMsUUFBUTtRQUN0QyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUM7UUFDOUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUM7SUFDeEIsTUFBTSxVQUFVLEdBQUcsYUFBYSxDQUFDLFFBQVE7UUFDdkMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxhQUFhLENBQUMsTUFBTSxDQUFDO1FBQ2hELENBQUMsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDO0lBRXpCLE1BQU0sR0FBRyxHQUFvQixFQUFFLENBQUM7SUFFaEMsS0FBSyxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ2xFLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQztRQUNuRCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUM7UUFDcEQsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FDN0IsTUFBTSxDQUFDLEtBQUs7WUFDVixDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsUUFBUTtnQkFDckIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsU0FBUztnQkFDMUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7WUFDbkIsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLFFBQVE7Z0JBQ3JCLENBQUMsQ0FBQyxTQUFTO2dCQUNYLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQyxDQUNqQyxDQUFDO1FBQ0YsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FDOUIsTUFBTSxDQUFDLE1BQU07WUFDWCxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsUUFBUTtnQkFDckIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsVUFBVTtnQkFDNUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFDcEIsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLFFBQVE7Z0JBQ3JCLENBQUMsQ0FBQyxVQUFVO2dCQUNaLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxDQUNsQyxDQUFDO1FBRUYsSUFBSSxNQUFNLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3RDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN0QyxNQUFNLFVBQVUsR0FBRyxzQkFBc0IsQ0FDdkMsSUFBSSxFQUNKLENBQUMsR0FBRyxDQUFDLEVBQ0wsTUFBTSxDQUFDLGdCQUFnQixDQUN4QixDQUFDO2dCQUVGLElBQUksYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQzVCLENBQ0UsQ0FBQSxNQUFBLE1BQU0sQ0FBQyxZQUFZLDBDQUFFLENBQUMsTUFBSyxTQUFTO29CQUNwQyxDQUFBLE1BQUEsTUFBTSxDQUFDLFlBQVksMENBQUUsQ0FBQyxNQUFLLElBQUksQ0FDaEM7b0JBQ0MsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLFFBQVE7d0JBQ3JCLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsR0FBRyxTQUFTO3dCQUNuQyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7b0JBQzVCLENBQUMsQ0FBQyxTQUFTLENBQ2QsQ0FBQztnQkFDRixJQUFJLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUM1QixDQUNFLENBQUEsTUFBQSxNQUFNLENBQUMsWUFBWSwwQ0FBRSxDQUFDLE1BQUssU0FBUztvQkFDcEMsQ0FBQSxNQUFBLE1BQU0sQ0FBQyxZQUFZLDBDQUFFLENBQUMsTUFBSyxJQUFJLENBQ2hDO29CQUNDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxRQUFRO3dCQUNyQixDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsVUFBVTt3QkFDcEMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO29CQUM1QixDQUFDLENBQUMsQ0FBQyxDQUNOLENBQUM7Z0JBRUYsR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLFVBQVUsQ0FDMUIsS0FBSyxFQUNMLFNBQVMsR0FBRyxhQUFhLEdBQUcsQ0FBQyxFQUM3QixTQUFTLEdBQUcsYUFBYSxHQUFHLENBQUMsRUFDN0IsYUFBYSxFQUNiLGNBQWMsQ0FDZixDQUFDO2FBQ0g7U0FDRjthQUFNO1lBQ0wsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLFVBQVUsQ0FDcEIsS0FBSyxFQUNMLFNBQVMsRUFDVCxTQUFTLEVBQ1QsYUFBYSxFQUNiLGNBQWMsQ0FDZixDQUFDO1NBQ0g7S0FDRjtJQUVELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQWxHRCxvQ0FrR0M7QUFFRDs7R0FFRztBQUNILFNBQVMsVUFBVSxDQUNqQixLQUEyQyxFQUMzQyxDQUFTLEVBQ1QsQ0FBUyxFQUNULEtBQWEsRUFDYixNQUFjO0lBRWQsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNoRCxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRXhDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ3JCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0lBRXZCLElBQUksQ0FBQyxPQUFPLEVBQUU7UUFDWixNQUFNLElBQUksS0FBSyxDQUFDLDBCQUEwQixDQUFDLENBQUM7S0FDN0M7SUFFRCxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFFbkUsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBUyxzQkFBc0IsQ0FDN0IsVUFBa0IsRUFDbEIsZUFBdUIsRUFDdkIsZ0JBQXlCO0lBRXpCLE9BQU8sQ0FBQyxnQkFBZ0IsYUFBaEIsZ0JBQWdCLGNBQWhCLGdCQUFnQixHQUFJLG9DQUFvQyxDQUFDO1NBQzlELE9BQU8sQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDO1NBQzdCLE9BQU8sQ0FBQyxLQUFLLEVBQUUsZUFBZSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7QUFDaEQsQ0FBQztBQUVEOzs7OztHQUtHO0FBQ0ksS0FBSyxVQUFVLDRCQUE0QixDQUNoRCxPQUtFLEVBQ0YsSUFLQyxFQUNELFNBQWlCOztJQUVqQixNQUFNLEtBQUssR0FBRyxNQUFBLE9BQU8sQ0FBQyxTQUFTLENBQUMsMENBQUUsT0FBTyxDQUFDO0lBQzFDLElBQUksQ0FBQyxLQUFLLEVBQUU7UUFDVixNQUFNLElBQUksS0FBSyxDQUFDLFVBQVUsU0FBUyxhQUFhLENBQUMsQ0FBQztLQUNuRDtJQUVELE1BQU0sR0FBRyxHQUFHLFlBQVksQ0FBQyxLQUF5QixFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUVsRSxLQUFLLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtRQUNoRCxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUc7WUFDZCxJQUFJO1lBQ0osSUFBSSxFQUFFLE9BQU87WUFDYixPQUFPLEVBQUUsTUFBTTtZQUNmLE1BQU0sRUFBRSxDQUFDO1NBQ1YsQ0FBQztLQUNIO0FBQ0gsQ0FBQztBQTlCRCxvRUE4QkMifQ==
})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE87Ozs7Ozs7OztBQ1ZhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG9DQUFvQyxHQUFHLG9CQUFvQjtBQUMzRCwrQ0FBK0MsS0FBSyxFQUFFLEVBQUU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsd0VBQXdFO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixLQUFLO0FBQ3hCLG1CQUFtQixFQUFFO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsVUFBVTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDLDJDQUEyQyx1aUwiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYmFzZW1lbnR1bml2ZXJzZS90ZXh0dXJlLWF0bGFzL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9AYmFzZW1lbnR1bml2ZXJzZS90ZXh0dXJlLWF0bGFzLy4vaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IGZhY3RvcnkoKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHNlbGYsICgpID0+IHtcbnJldHVybiAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudGV4dHVyZUF0bGFzQ29udGVudFByb2Nlc3NvciA9IGV4cG9ydHMudGV4dHVyZUF0bGFzID0gdm9pZCAwO1xuY29uc3QgREVGQVVMVF9SRVBFQVRJTkdfUkVHSU9OX05BTUVfRk9STUFUID0gJ3tuYW1lfS17bn0nO1xuY29uc3QgREVGQVVMVF9PUFRJT05TID0ge1xuICAgIHJlbGF0aXZlOiB0cnVlLFxuICAgIHdpZHRoOiAxLFxuICAgIGhlaWdodDogMSxcbiAgICByZWdpb25zOiB7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICB9LFxuICAgIH0sXG59O1xuLyoqXG4gKiBUYWtlcyBhbiBpbWFnZSBhbmQgc29tZSB0ZXh0dXJlIGF0bGFzIG9wdGlvbnMgYW5kIHJldHVybnMgYSBkaWN0aW9uYXJ5XG4gKiBvZiBjYW52YXNlcyBpbmRleGVkIGJ5IHJlZ2lvbiBuYW1lXG4gKi9cbmZ1bmN0aW9uIHRleHR1cmVBdGxhcyhpbWFnZSwgb3B0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBjb25zdCBhY3R1YWxPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TLCBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fSk7XG4gICAgaWYgKGFjdHVhbE9wdGlvbnMud2lkdGggPD0gMCB8fCBhY3R1YWxPcHRpb25zLmhlaWdodCA8PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV2lkdGggYW5kIGhlaWdodCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhhY3R1YWxPcHRpb25zLnJlZ2lvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHJlZ2lvbnMgZGVmaW5lZCcpO1xuICAgIH1cbiAgICBjb25zdCBjZWxsV2lkdGggPSBhY3R1YWxPcHRpb25zLnJlbGF0aXZlXG4gICAgICAgID8gTWF0aC5jZWlsKGltYWdlLndpZHRoIC8gYWN0dWFsT3B0aW9ucy53aWR0aClcbiAgICAgICAgOiBhY3R1YWxPcHRpb25zLndpZHRoO1xuICAgIGNvbnN0IGNlbGxIZWlnaHQgPSBhY3R1YWxPcHRpb25zLnJlbGF0aXZlXG4gICAgICAgID8gTWF0aC5jZWlsKGltYWdlLmhlaWdodCAvIGFjdHVhbE9wdGlvbnMuaGVpZ2h0KVxuICAgICAgICA6IGFjdHVhbE9wdGlvbnMuaGVpZ2h0O1xuICAgIGNvbnN0IG1hcCA9IHt9O1xuICAgIGZvciAoY29uc3QgW25hbWUsIHJlZ2lvbl0gb2YgT2JqZWN0LmVudHJpZXMoYWN0dWFsT3B0aW9ucy5yZWdpb25zKSkge1xuICAgICAgICBjb25zdCBhYnNvbHV0ZVggPSBNYXRoLmZsb29yKHJlZ2lvbi54ICogY2VsbFdpZHRoKTtcbiAgICAgICAgY29uc3QgYWJzb2x1dGVZID0gTWF0aC5mbG9vcihyZWdpb24ueSAqIGNlbGxIZWlnaHQpO1xuICAgICAgICBjb25zdCBhYnNvbHV0ZVdpZHRoID0gTWF0aC5jZWlsKHJlZ2lvbi53aWR0aFxuICAgICAgICAgICAgPyAoYWN0dWFsT3B0aW9ucy5yZWxhdGl2ZVxuICAgICAgICAgICAgICAgID8gcmVnaW9uLndpZHRoICogY2VsbFdpZHRoXG4gICAgICAgICAgICAgICAgOiByZWdpb24ud2lkdGgpXG4gICAgICAgICAgICA6IChhY3R1YWxPcHRpb25zLnJlbGF0aXZlXG4gICAgICAgICAgICAgICAgPyBjZWxsV2lkdGhcbiAgICAgICAgICAgICAgICA6IGltYWdlLndpZHRoIC0gYWJzb2x1dGVYKSk7XG4gICAgICAgIGNvbnN0IGFic29sdXRlSGVpZ2h0ID0gTWF0aC5jZWlsKHJlZ2lvbi5oZWlnaHRcbiAgICAgICAgICAgID8gKGFjdHVhbE9wdGlvbnMucmVsYXRpdmVcbiAgICAgICAgICAgICAgICA/IHJlZ2lvbi5oZWlnaHQgKiBjZWxsSGVpZ2h0XG4gICAgICAgICAgICAgICAgOiByZWdpb24uaGVpZ2h0KVxuICAgICAgICAgICAgOiAoYWN0dWFsT3B0aW9ucy5yZWxhdGl2ZVxuICAgICAgICAgICAgICAgID8gY2VsbEhlaWdodFxuICAgICAgICAgICAgICAgIDogaW1hZ2UuaGVpZ2h0IC0gYWJzb2x1dGVZKSk7XG4gICAgICAgIGlmIChyZWdpb24ucmVwZWF0ICYmIHJlZ2lvbi5yZXBlYXQgPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlZ2lvbi5yZXBlYXQ7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGVhdE5hbWUgPSBnZXRSZXBlYXRpbmdSZWdpb25OYW1lKG5hbWUsIGkgKyAxLCByZWdpb24ucmVwZWF0TmFtZUZvcm1hdCk7XG4gICAgICAgICAgICAgICAgbGV0IHJlcGVhdE9mZnNldFggPSBNYXRoLmZsb29yKCgoKF9hID0gcmVnaW9uLnJlcGVhdE9mZnNldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLngpICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgKChfYiA9IHJlZ2lvbi5yZXBlYXRPZmZzZXQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi54KSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgPyAoYWN0dWFsT3B0aW9ucy5yZWxhdGl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZWdpb24ucmVwZWF0T2Zmc2V0LnggKiBjZWxsV2lkdGhcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVnaW9uLnJlcGVhdE9mZnNldC54KVxuICAgICAgICAgICAgICAgICAgICA6IGNlbGxXaWR0aCk7XG4gICAgICAgICAgICAgICAgbGV0IHJlcGVhdE9mZnNldFkgPSBNYXRoLmZsb29yKCgoKF9jID0gcmVnaW9uLnJlcGVhdE9mZnNldCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnkpICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgKChfZCA9IHJlZ2lvbi5yZXBlYXRPZmZzZXQpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC55KSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgPyAoYWN0dWFsT3B0aW9ucy5yZWxhdGl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZWdpb24ucmVwZWF0T2Zmc2V0LnkgKiBjZWxsSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlZ2lvbi5yZXBlYXRPZmZzZXQueSlcbiAgICAgICAgICAgICAgICAgICAgOiAwKTtcbiAgICAgICAgICAgICAgICBtYXBbcmVwZWF0TmFtZV0gPSBjaG9wUmVnaW9uKGltYWdlLCBhYnNvbHV0ZVggKyByZXBlYXRPZmZzZXRYICogaSwgYWJzb2x1dGVZICsgcmVwZWF0T2Zmc2V0WSAqIGksIGFic29sdXRlV2lkdGgsIGFic29sdXRlSGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1hcFtuYW1lXSA9IGNob3BSZWdpb24oaW1hZ2UsIGFic29sdXRlWCwgYWJzb2x1dGVZLCBhYnNvbHV0ZVdpZHRoLCBhYnNvbHV0ZUhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbn1cbmV4cG9ydHMudGV4dHVyZUF0bGFzID0gdGV4dHVyZUF0bGFzO1xuLyoqXG4gKiBDaG9wIGEgcmVjdGFuZ3VsYXIgcmVnaW9uIGZyb20gYW4gaW1hZ2UgaW50byBhIG5ldyBjYW52YXNcbiAqL1xuZnVuY3Rpb24gY2hvcFJlZ2lvbihpbWFnZSwgeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgMkQgY29udGV4dCcpO1xuICAgIH1cbiAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgeCwgeSwgd2lkdGgsIGhlaWdodCwgMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgcmV0dXJuIGNhbnZhcztcbn1cbi8qKlxuICogR2V0IHRoZSBuYW1lIG9mIGEgcmVwZWF0aW5nIHJlZ2lvblxuICovXG5mdW5jdGlvbiBnZXRSZXBlYXRpbmdSZWdpb25OYW1lKHJlZ2lvbk5hbWUsIHJlcGV0aXRpb25JbmRleCwgcmVnaW9uTmFtZUZvcm1hdCkge1xuICAgIHJldHVybiAocmVnaW9uTmFtZUZvcm1hdCAhPT0gbnVsbCAmJiByZWdpb25OYW1lRm9ybWF0ICE9PSB2b2lkIDAgPyByZWdpb25OYW1lRm9ybWF0IDogREVGQVVMVF9SRVBFQVRJTkdfUkVHSU9OX05BTUVfRk9STUFUKVxuICAgICAgICAucmVwbGFjZSgne25hbWV9JywgcmVnaW9uTmFtZSlcbiAgICAgICAgLnJlcGxhY2UoJ3tufScsIHJlcGV0aXRpb25JbmRleC50b1N0cmluZygpKTtcbn1cbi8qKlxuICogQ29udGVudCBNYW5hZ2VyIFByb2Nlc3NvciB3cmFwcGVyIHdoaWNoIGFsbG93cyB0aGUgdGV4dHVyZUF0bGFzIGZ1bmN0aW9uXG4gKiB0byBiZSB1c2VkIGFzIGEgcHJvY2Vzc29yIGluIGEgQ29udGVudCBNYW5hZ2VyXG4gKlxuICogQHNlZSBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9AYmFzZW1lbnR1bml2ZXJzZS9jb250ZW50LW1hbmFnZXJcbiAqL1xuYXN5bmMgZnVuY3Rpb24gdGV4dHVyZUF0bGFzQ29udGVudFByb2Nlc3Nvcihjb250ZW50LCBkYXRhLCBpbWFnZU5hbWUpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgaW1hZ2UgPSAoX2EgPSBjb250ZW50W2ltYWdlTmFtZV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb250ZW50O1xuICAgIGlmICghaW1hZ2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbWFnZSAnJHtpbWFnZU5hbWV9JyBub3QgZm91bmRgKTtcbiAgICB9XG4gICAgY29uc3QgbWFwID0gdGV4dHVyZUF0bGFzKGltYWdlLCBkYXRhLmNvbnRlbnQpO1xuICAgIGZvciAoY29uc3QgW25hbWUsIGNhbnZhc10gb2YgT2JqZWN0LmVudHJpZXMobWFwKSkge1xuICAgICAgICBjb250ZW50W25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgICBjb250ZW50OiBjYW52YXMsXG4gICAgICAgICAgICBzdGF0dXM6IDQsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0cy50ZXh0dXJlQXRsYXNDb250ZW50UHJvY2Vzc29yID0gdGV4dHVyZUF0bGFzQ29udGVudFByb2Nlc3Nvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWFXNWtaWGd1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXVMaTlwYm1SbGVDNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lPenM3UVVFNFIwRXNUVUZCVFN4dlEwRkJiME1zUjBGQlJ5eFpRVUZaTEVOQlFVTTdRVUZETVVRc1RVRkJUU3hsUVVGbExFZEJRWGRDTzBsQlF6TkRMRkZCUVZFc1JVRkJSU3hKUVVGSk8wbEJRMlFzUzBGQlN5eEZRVUZGTEVOQlFVTTdTVUZEVWl4TlFVRk5MRVZCUVVVc1EwRkJRenRKUVVOVUxFOUJRVThzUlVGQlJUdFJRVU5RTEU5QlFVOHNSVUZCUlR0WlFVTlFMRU5CUVVNc1JVRkJSU3hEUVVGRE8xbEJRMG9zUTBGQlF5eEZRVUZGTEVOQlFVTTdVMEZEVER0TFFVTkdPME5CUTBZc1EwRkJRenRCUVVWR096czdSMEZIUnp0QlFVTklMRk5CUVdkQ0xGbEJRVmtzUTBGRE1VSXNTMEZCTWtNc1JVRkRNME1zVDBGQmMwTTdPMGxCUlhSRExFMUJRVTBzWVVGQllTeEhRVUZITEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUTJwRExFVkJRVVVzUlVGRFJpeGxRVUZsTEVWQlEyWXNUMEZCVHl4aFFVRlFMRTlCUVU4c1kwRkJVQ3hQUVVGUExFZEJRVWtzUlVGQlJTeERRVU5rTEVOQlFVTTdTVUZGUml4SlFVRkpMR0ZCUVdFc1EwRkJReXhMUVVGTExFbEJRVWtzUTBGQlF5eEpRVUZKTEdGQlFXRXNRMEZCUXl4TlFVRk5MRWxCUVVrc1EwRkJReXhGUVVGRk8xRkJRM3BFTEUxQlFVMHNTVUZCU1N4TFFVRkxMRU5CUVVNc2VVTkJRWGxETEVOQlFVTXNRMEZCUXp0TFFVTTFSRHRKUVVWRUxFbEJRVWtzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zVFVGQlRTeExRVUZMTEVOQlFVTXNSVUZCUlR0UlFVTnVSQ3hOUVVGTkxFbEJRVWtzUzBGQlN5eERRVUZETEc5Q1FVRnZRaXhEUVVGRExFTkJRVU03UzBGRGRrTTdTVUZGUkN4TlFVRk5MRk5CUVZNc1IwRkJSeXhoUVVGaExFTkJRVU1zVVVGQlVUdFJRVU4wUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNTMEZCU3l4SFFVRkhMR0ZCUVdFc1EwRkJReXhMUVVGTExFTkJRVU03VVVGRE9VTXNRMEZCUXl4RFFVRkRMR0ZCUVdFc1EwRkJReXhMUVVGTExFTkJRVU03U1VGRGVFSXNUVUZCVFN4VlFVRlZMRWRCUVVjc1lVRkJZU3hEUVVGRExGRkJRVkU3VVVGRGRrTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEUxQlFVMHNSMEZCUnl4aFFVRmhMRU5CUVVNc1RVRkJUU3hEUVVGRE8xRkJRMmhFTEVOQlFVTXNRMEZCUXl4aFFVRmhMRU5CUVVNc1RVRkJUU3hEUVVGRE8wbEJSWHBDTEUxQlFVMHNSMEZCUnl4SFFVRnZRaXhGUVVGRkxFTkJRVU03U1VGRmFFTXNTMEZCU3l4TlFVRk5MRU5CUVVNc1NVRkJTU3hGUVVGRkxFMUJRVTBzUTBGQlF5eEpRVUZKTEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1lVRkJZU3hEUVVGRExFOUJRVThzUTBGQlF5eEZRVUZGTzFGQlEyeEZMRTFCUVUwc1UwRkJVeXhIUVVGSExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1IwRkJSeXhUUVVGVExFTkJRVU1zUTBGQlF6dFJRVU51UkN4TlFVRk5MRk5CUVZNc1IwRkJSeXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRWRCUVVjc1ZVRkJWU3hEUVVGRExFTkJRVU03VVVGRGNFUXNUVUZCVFN4aFFVRmhMRWRCUVVjc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGRE4wSXNUVUZCVFN4RFFVRkRMRXRCUVVzN1dVRkRWaXhEUVVGRExFTkJRVU1zUTBGQlF5eGhRVUZoTEVOQlFVTXNVVUZCVVR0blFrRkRja0lzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4TFFVRkxMRWRCUVVjc1UwRkJVenRuUWtGRE1VSXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhMUVVGTExFTkJRVU03V1VGRGJrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1lVRkJZU3hEUVVGRExGRkJRVkU3WjBKQlEzSkNMRU5CUVVNc1EwRkJReXhUUVVGVE8yZENRVU5ZTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1MwRkJTeXhIUVVGSExGTkJRVk1zUTBGQlF5eERRVU5xUXl4RFFVRkRPMUZCUTBZc1RVRkJUU3hqUVVGakxFZEJRVWNzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZET1VJc1RVRkJUU3hEUVVGRExFMUJRVTA3V1VGRFdDeERRVUZETEVOQlFVTXNRMEZCUXl4aFFVRmhMRU5CUVVNc1VVRkJVVHRuUWtGRGNrSXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTkxFZEJRVWNzVlVGQlZUdG5Ra0ZETlVJc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eE5RVUZOTEVOQlFVTTdXVUZEY0VJc1EwRkJReXhEUVVGRExFTkJRVU1zWVVGQllTeERRVUZETEZGQlFWRTdaMEpCUTNKQ0xFTkJRVU1zUTBGQlF5eFZRVUZWTzJkQ1FVTmFMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVFVGQlRTeEhRVUZITEZOQlFWTXNRMEZCUXl4RFFVTnNReXhEUVVGRE8xRkJSVVlzU1VGQlNTeE5RVUZOTEVOQlFVTXNUVUZCVFN4SlFVRkpMRTFCUVUwc1EwRkJReXhOUVVGTkxFZEJRVWNzUTBGQlF5eEZRVUZGTzFsQlEzUkRMRXRCUVVzc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4TlFVRk5MRU5CUVVNc1RVRkJUU3hGUVVGRkxFTkJRVU1zUlVGQlJTeEZRVUZGTzJkQ1FVTjBReXhOUVVGTkxGVkJRVlVzUjBGQlJ5eHpRa0ZCYzBJc1EwRkRka01zU1VGQlNTeEZRVU5LTEVOQlFVTXNSMEZCUnl4RFFVRkRMRVZCUTB3c1RVRkJUU3hEUVVGRExHZENRVUZuUWl4RFFVTjRRaXhEUVVGRE8yZENRVVZHTEVsQlFVa3NZVUZCWVN4SFFVRkhMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRelZDTEVOQlEwVXNRMEZCUVN4TlFVRkJMRTFCUVUwc1EwRkJReXhaUVVGWkxEQkRRVUZGTEVOQlFVTXNUVUZCU3l4VFFVRlRPMjlDUVVOd1F5eERRVUZCTEUxQlFVRXNUVUZCVFN4RFFVRkRMRmxCUVZrc01FTkJRVVVzUTBGQlF5eE5RVUZMTEVsQlFVa3NRMEZEYUVNN2IwSkJRME1zUTBGQlF5eERRVUZETEVOQlFVTXNZVUZCWVN4RFFVRkRMRkZCUVZFN2QwSkJRM0pDTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1dVRkJXU3hEUVVGRExFTkJRVU1zUjBGQlJ5eFRRVUZUTzNkQ1FVTnVReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEZsQlFWa3NRMEZCUXl4RFFVRkRMRU5CUVVNN2IwSkJRelZDTEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUTJRc1EwRkJRenRuUWtGRFJpeEpRVUZKTEdGQlFXRXNSMEZCUnl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVNMVFpeERRVU5GTEVOQlFVRXNUVUZCUVN4TlFVRk5MRU5CUVVNc1dVRkJXU3d3UTBGQlJTeERRVUZETEUxQlFVc3NVMEZCVXp0dlFrRkRjRU1zUTBGQlFTeE5RVUZCTEUxQlFVMHNRMEZCUXl4WlFVRlpMREJEUVVGRkxFTkJRVU1zVFVGQlN5eEpRVUZKTEVOQlEyaERPMjlDUVVORExFTkJRVU1zUTBGQlF5eERRVUZETEdGQlFXRXNRMEZCUXl4UlFVRlJPM2RDUVVOeVFpeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRmxCUVZrc1EwRkJReXhEUVVGRExFZEJRVWNzVlVGQlZUdDNRa0ZEY0VNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXl4RFFVRkRPMjlDUVVNMVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVTk9MRU5CUVVNN1owSkJSVVlzUjBGQlJ5eERRVUZETEZWQlFWVXNRMEZCUXl4SFFVRkhMRlZCUVZVc1EwRkRNVUlzUzBGQlN5eEZRVU5NTEZOQlFWTXNSMEZCUnl4aFFVRmhMRWRCUVVjc1EwRkJReXhGUVVNM1FpeFRRVUZUTEVkQlFVY3NZVUZCWVN4SFFVRkhMRU5CUVVNc1JVRkROMElzWVVGQllTeEZRVU5pTEdOQlFXTXNRMEZEWml4RFFVRkRPMkZCUTBnN1UwRkRSanRoUVVGTk8xbEJRMHdzUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4SFFVRkhMRlZCUVZVc1EwRkRjRUlzUzBGQlN5eEZRVU5NTEZOQlFWTXNSVUZEVkN4VFFVRlRMRVZCUTFRc1lVRkJZU3hGUVVOaUxHTkJRV01zUTBGRFppeERRVUZETzFOQlEwZzdTMEZEUmp0SlFVVkVMRTlCUVU4c1IwRkJSeXhEUVVGRE8wRkJRMklzUTBGQlF6dEJRV3hIUkN4dlEwRnJSME03UVVGRlJEczdSMEZGUnp0QlFVTklMRk5CUVZNc1ZVRkJWU3hEUVVOcVFpeExRVUV5UXl4RlFVTXpReXhEUVVGVExFVkJRMVFzUTBGQlV5eEZRVU5VTEV0QlFXRXNSVUZEWWl4TlFVRmpPMGxCUldRc1RVRkJUU3hOUVVGTkxFZEJRVWNzVVVGQlVTeERRVUZETEdGQlFXRXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJRenRKUVVOb1JDeE5RVUZOTEU5QlFVOHNSMEZCUnl4TlFVRk5MRU5CUVVNc1ZVRkJWU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzBsQlJYaERMRTFCUVUwc1EwRkJReXhMUVVGTExFZEJRVWNzUzBGQlN5eERRVUZETzBsQlEzSkNMRTFCUVUwc1EwRkJReXhOUVVGTkxFZEJRVWNzVFVGQlRTeERRVUZETzBsQlJYWkNMRWxCUVVrc1EwRkJReXhQUVVGUExFVkJRVVU3VVVGRFdpeE5RVUZOTEVsQlFVa3NTMEZCU3l4RFFVRkRMREJDUVVFd1FpeERRVUZETEVOQlFVTTdTMEZETjBNN1NVRkZSQ3hQUVVGUExFTkJRVU1zVTBGQlV5eERRVUZETEV0QlFVc3NSVUZCUlN4RFFVRkRMRVZCUVVVc1EwRkJReXhGUVVGRkxFdEJRVXNzUlVGQlJTeE5RVUZOTEVWQlFVVXNRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSU3hMUVVGTExFVkJRVVVzVFVGQlRTeERRVUZETEVOQlFVTTdTVUZGYmtVc1QwRkJUeXhOUVVGTkxFTkJRVU03UVVGRGFFSXNRMEZCUXp0QlFVVkVPenRIUVVWSE8wRkJRMGdzVTBGQlV5eHpRa0ZCYzBJc1EwRkROMElzVlVGQmEwSXNSVUZEYkVJc1pVRkJkVUlzUlVGRGRrSXNaMEpCUVhsQ08wbEJSWHBDTEU5QlFVOHNRMEZCUXl4blFrRkJaMElzWVVGQmFFSXNaMEpCUVdkQ0xHTkJRV2hDTEdkQ1FVRm5RaXhIUVVGSkxHOURRVUZ2UXl4RFFVRkRPMU5CUXpsRUxFOUJRVThzUTBGQlF5eFJRVUZSTEVWQlFVVXNWVUZCVlN4RFFVRkRPMU5CUXpkQ0xFOUJRVThzUTBGQlF5eExRVUZMTEVWQlFVVXNaVUZCWlN4RFFVRkRMRkZCUVZFc1JVRkJSU3hEUVVGRExFTkJRVU03UVVGRGFFUXNRMEZCUXp0QlFVVkVPenM3T3p0SFFVdEhPMEZCUTBrc1MwRkJTeXhWUVVGVkxEUkNRVUUwUWl4RFFVTm9SQ3hQUVV0RkxFVkJRMFlzU1VGTFF5eEZRVU5FTEZOQlFXbENPenRKUVVWcVFpeE5RVUZOTEV0QlFVc3NSMEZCUnl4TlFVRkJMRTlCUVU4c1EwRkJReXhUUVVGVExFTkJRVU1zTUVOQlFVVXNUMEZCVHl4RFFVRkRPMGxCUXpGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVWQlFVVTdVVUZEVml4TlFVRk5MRWxCUVVrc1MwRkJTeXhEUVVGRExGVkJRVlVzVTBGQlV5eGhRVUZoTEVOQlFVTXNRMEZCUXp0TFFVTnVSRHRKUVVWRUxFMUJRVTBzUjBGQlJ5eEhRVUZITEZsQlFWa3NRMEZCUXl4TFFVRjVRaXhGUVVGRkxFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXp0SlFVVnNSU3hMUVVGTExFMUJRVTBzUTBGQlF5eEpRVUZKTEVWQlFVVXNUVUZCVFN4RFFVRkRMRWxCUVVrc1RVRkJUU3hEUVVGRExFOUJRVThzUTBGQlF5eEhRVUZITEVOQlFVTXNSVUZCUlR0UlFVTm9SQ3hQUVVGUExFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVYzdXVUZEWkN4SlFVRkpPMWxCUTBvc1NVRkJTU3hGUVVGRkxFOUJRVTg3V1VGRFlpeFBRVUZQTEVWQlFVVXNUVUZCVFR0WlFVTm1MRTFCUVUwc1JVRkJSU3hEUVVGRE8xTkJRMVlzUTBGQlF6dExRVU5JTzBGQlEwZ3NRMEZCUXp0QlFUbENSQ3h2UlVFNFFrTWlmUT09Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9